# File Distributor

Python 3 scripts which download a file from Dropbox and upload it to pCloud and Google Drive.

## Setup

### Custom Modules

Setup the [Logger](https://github.com/jleung51/scripts/tree/master/modules/logger) module in the directory `src/`.

### Dropbox

Install the pip dependency `dropbox`.

Follow the first few steps in the [Dropbox Developers Tutorial](https://www.dropbox.com/developers/documentation/python#tutorial) to create a Dropbox API application and generate its access token.

### Google Drive

This script uses the [Google Drive API v3](https://developers.google.com/api-client-library/python/apis/drive/v3).

Install the following pip3 dependencies:
* `argparse`
* `google-api-python-client`
* `httplib2`

You will need to create a Google project and generate a client secret for authentication, and upon its first execution the script will generate and save OAuth 2.0 credentials.

Go to the [Google Developers Console](https://console.developers.google.com/apis/api/drive/overview) and create a new project. Select your project in the top-left dropdown, and search for and enable the Google Drive API in the Developers Console dashboard.

From the [Google Drive Developer APIs for Python](https://developers.google.com/drive/v3/web/quickstart/python
), follow **Step 1: Turn on the Drive API** to get an authentication key for the Gmail account from which you'll be sending the email. Make sure you keep `client_secret.json` in the same directory as your code.

During the first time you run the script, Google Drive will display a URL and ask you to retrieve the verification code. Follow the instructions so you can properly authenticate your script to access your Google Drive. This will not be necessary on subsequent calls, as long as you do not modify the autogenerated file `generated_credentials.json`.

### All Scripts

In `file_distributor.cfg`, fill in the variables as described.

### Google Drive: Parent Directory FileId (Optional)

In order to upload a file to a specific directory in Google Drive, the _FileId_ of the parent directory must be provided in the configuration file. If it is not provided, then the file will simply be uploaded to the root directory.

First, manually create the target directory in Google Drive. Set up the scripts as specified above. In `gdrive_upload.py`, comment out the `upload_file()` call and uncomment the `list_files()` call. Execute this script once and the file IDs of all files and directories in your Google Drive will be printed to the console. Find the file ID of the target directory and place it into the configuration file.
