# Gmail Sender

Python 3 module which utilizes the [Gmail APIs](https://developers.google.com/gmail/api/) to send an email.

## Setup

### Authorizing Emails from a Gmail account

Install the following pip 3 dependencies:
* argparse
* google-api-python-client
* httplib2

From the [Gmail Developer APIs](https://developers.google.com/gmail/api/quickstart/python), follow **Step 1: Turn on the Gmail API** to get an authentication key for the Gmail account from which you'll be sending the email. Make sure you keep `client_secret.json` in the same directory as your code.

During the first time you run the script, Gmail will display a URL and ask you to retrieve the verification code. Follow the instructions so you can properly authenticate your script to use your Gmail account. This will not be necessary on subsequent calls, as long as you do not modify the autogenerated file `generated_credentials.json`.

### Execution

Add the `gmail_sender.py` module and its related credential files to the directory of the Python program which needs to log reports to Slack. Import the module in your program:
```
from gmail_sender import GmailSender
```

Create a `GmailSender` object and refresh the credentials:
```
gmail_sender = GmailSender(source_gmail)
```

And send your email:
```
gmail_sender.send_email(target_email, subject, message_text)
```

For detailed information on the parameters and usage, see the documentation in the `GmailSender` class.

### Configuration

If you want to enable debug logging output, change the value of the variable `print_debug_logs` in `gmail_sender.py` to True.

Execution details are formatted in a loggable format like so:
```
[ 2016-11-12 22:27:24 | DEBUG   ] Mail source:  me@gmail.com
[ 2016-11-12 22:27:24 | DEBUG   ] Mail target:  other_me@email.com
[ 2016-11-12 22:27:24 | DEBUG   ] Mail subject: Traffic Incident Alert
[ 2016-11-12 22:27:24 | DEBUG   ] Mail message: Serious traffic disruption. Allot extra time for returning home.
[ 2016-11-12 22:27:25 | DEBUG   ] Mail sent.
```
